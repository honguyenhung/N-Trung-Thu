<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Cho nè</title>
  <link href="https://fonts.googleapis.com/css2?family=Mali:wght@500;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --accent: #ff7f50;
      --accent-2: #ff5722;
    }

    html,
    body {
      height: 100%;
      margin: 0;
      font-family: "Mali", cursive;
      background: #060614;
      overflow: hidden;
    }

    .stage {
      position: relative;
      min-height: 100vh;
      overflow: hidden;
    }

    canvas#starfield {
      display: block;
      width: 100%;
      height: 100%;
    }

    .moon {
      position: absolute;
      top: 60px;
      right: 100px;
      width: 160px;
      height: 160px;
      background: radial-gradient(circle at 30% 30%, #fff, #f8f8f8 70%, #e0e0e0 100%);
      border-radius: 50%;
      box-shadow: 0 0 60px rgba(255, 255, 220, 0.8);
      z-index: 10;
    }

    #wish-popup {
      position: fixed;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: rgba(255, 255, 255, 0.96);
      color: #ff8d22;
      padding: 25px 35px;
      border-radius: 18px;
      font-size: 1.8rem;
      font-weight: 700;
      display: none;
      z-index: 9999;
      box-shadow: 0 0 25px #ff8a50, 0 0 35px #ffd180;
      text-align: center;
      text-shadow: 0 0 12px #ffd180;
      white-space: nowrap;
    }

    /* Hiệu ứng xuất hiện và biến mất */
    @keyframes slideIn {
      0% {
        opacity: 0;
        transform: translate(-50%, -30px);
      }

      100% {
        opacity: 1;
        transform: translate(-50%, -50%);
      }
    }

    @keyframes slideOut {
      0% {
        opacity: 1;
        transform: translate(-50%, -50%);
      }

      100% {
        opacity: 0;
        transform: translate(-50%, -70px);
      }
    }

    .show {
      display: block;
      animation: slideIn 0.8s ease forwards;
    }

    .hide {
      animation: slideOut 0.8s ease forwards;
    }

    #hint {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%);
      color: #ffa722;
      font-size: 24px;
      font-weight: 700;
      opacity: 0;
      transition: opacity 0.5s;
      text-shadow: 0 0 10px #ff8a50;
    }

    @media (max-width: 600px) {
      #wish-popup {
        font-size: 1.2rem;
        padding: 16px 20px;
        white-space: normal;
        max-width: 80%;
      }
    }
  </style>
</head>

<body>
  <div class="stage">
    <canvas id="starfield"></canvas>
    <div class="moon"></div>
    <div id="lantern-container"></div>
    <div id="wish-popup"></div>
    <div id="hint">Chạm vào đèn trời</div>

    <audio id="bg-music" loop>
      <source src="a.mp3" type="audio/mp3">
    </audio>
  </div>

  <script>
    // --- Sao băng ---
    const canvas = document.getElementById("starfield");
    const ctx = canvas.getContext("2d");
    let w, h, stars = [], meteors = [];

    function resizeCanvas() {
      w = canvas.width = innerWidth;
      h = canvas.height = innerHeight;
      stars = [];
      for (let i = 0; i < (w * h) / 2200; i++) {
        stars.push({
          x: Math.random() * w,
          y: Math.random() * h,
          r: Math.random() * 1 + 0.2,
          a: Math.random(),
          t: Math.random() * 0.02 + 0.002
        });
      }
    }
    function drawStars() {
      ctx.clearRect(0, 0, w, h);
      for (let s of stars) {
        s.a += (Math.random() > 0.5 ? 1 : -1) * s.t;
        ctx.globalAlpha = s.a;
        ctx.fillStyle = "#fff";
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.r, 0, Math.PI * 2);
        ctx.fill();
      }
    }
    function loop() {
      drawStars();
      requestAnimationFrame(loop);
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);
    loop();

    // --- Lời chúc ---
    const wishes = [
      "Chúc bạn Nhi Trung Thu ấm áp, hạnh phúc!",
      "Chúc gia đình bạn đoàn viên, vui vẻ!",
      "Mùa trăng an lành và ngọt ngào!",
      "Chúc bạn luôn sáng như trăng rằm!",
      "Mong ước thành hiện thực nhé!"
    ];

    const popup = document.getElementById("wish-popup");
    let index = 0;

    function showNextWish() {
      if (index >= wishes.length) return; // dừng nếu hết lời chúc

      popup.classList.remove("hide");
      popup.classList.add("show");
      popup.textContent = wishes[index];
      popup.style.display = "block";

      // sau 1.8s ẩn đi
      setTimeout(() => {
        popup.classList.remove("show");
        popup.classList.add("hide");
      }, 1800);

      index++;
      if (index < wishes.length) {
        setTimeout(showNextWish, 2000);
      }
    }

    // tự khởi động sau 2s
    setTimeout(showNextWish, 2000);
  </script>
</body>
</html>
